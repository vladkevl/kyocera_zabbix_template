zabbix_export:
  version: '7.4'
  template_groups:
    - uuid: 480670e29a204d208ec225ccace9c3bb
      name: 'Templates/Kyocera printers'
  templates:
    - uuid: 1d5c4315e9c54ffbb2efbc7e50afddc6
      template: 'Kyocera MFP printers'
      name: 'Kyocera MFP printers'
      groups:
        - name: 'Templates/Kyocera printers'
      items:
        - uuid: 87abe0c021a944e1b0dac0fb926cd1dd
          name: 'Тонер: Ресурс картриджа'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.2.1.43.11.1.1.8.1.1
          key: capacity.device
          delay: '86400'
          history: 90d
          preprocessing:
            - type: IN_RANGE
              parameters:
                - '1'
                - ''
              error_handler: CUSTOM_VALUE
              error_handler_params: '1'
          tags:
            - tag: Application
              value: 'Данные о принтере'
        - uuid: a8b102a25bd9492dbaec8c4638a081dd
          name: 'Страниц откопировано'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.1347.42.3.1.3.1.1.2
          key: copy.device
          delay: '1800'
          history: 90d
          tags:
            - tag: Application
              value: Счетчики
        - uuid: 6b2787b18352492c876a163fc61bd83c
          name: 'Принтер: Статус на дисплее'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.1347.43.18.2.1.2.1.1
          key: display.devise
          delay: '30'
          history: 1d
          value_type: TEXT
          preprocessing:
            - type: JAVASCRIPT
              parameters:
                - |
                  var preStr = '';
                  var preStrAr = value.split(" ");
                  for (var j = 0; j < preStrAr.length; j++) {
                      preStr += String.fromCharCode(parseInt(preStrAr[j], 16));
                  }
                  var result = "";
                  var i = 0, c = 0, c2 = 0, c3 = 0;
                  
                  while (i < preStr.length) {
                      c = preStr.charCodeAt(i);
                  
                      if (c < 128) {
                          result += String.fromCharCode(c);
                          i++;
                      } else if (c > 191 && c < 224) {
                          c2 = preStr.charCodeAt(i + 1);
                          result += String.fromCharCode(((c & 31) << 6) | (c2 & 63));
                          i += 2;
                      } else {
                          c2 = preStr.charCodeAt(i + 1);
                          c3 = preStr.charCodeAt(i + 2);
                          result += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));
                          i += 3;
                      }
                  }
                  
                  return result;
          tags:
            - tag: Application
              value: 'Данные о принтере'
        - uuid: 6dc55b6b15264546858d8ff6e9af4fc6
          name: 'Принтер: Код ошибки'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.1347.43.18.2.1.3.1.1
          key: error.device
          delay: '10'
          history: 90d
          tags:
            - tag: Application
              value: 'Данные о принтере'
          triggers:
            - uuid: ca857ee5eefb42b1a20b72ceb17d6dc5
              expression: 'last(/Kyocera MFP printers/error.device)=10001'
              name: 'Готов к работе'
              status: DISABLED
              priority: INFO
            - uuid: ba0a40d909234af9977ea5b0b7d2c812
              expression: 'last(/Kyocera MFP printers/error.device)=10013'
              name: 'Добавление тонера'
              priority: INFO
            - uuid: c2077298026f45d5bc8dec3530b53b0b
              expression: 'last(/Kyocera MFP printers/error.device)=41208'
              name: 'Загрузите бумагу в кассету 1'
              status: DISABLED
              priority: INFO
            - uuid: 432ae32f1db844b1a6fed5da5b24d5b9
              expression: 'last(/Kyocera MFP printers/error.device)=42001'
              name: 'Замятие бумаги'
              priority: INFO
            - uuid: 00a13560fc884005a30d5bd078a1a0d4
              expression: 'last(/Kyocera MFP printers/error.device)=40601'
              name: 'Картридж установлен неправильно'
              priority: INFO
            - uuid: 38f6e778f4de40cf8f4b08b238424569
              expression: 'last(/Kyocera MFP printers/error.device)=46402'
              name: 'Неоригинальный картридж'
              priority: INFO
            - uuid: fd0273341018466eb0550364689923b3
              expression: 'last(/Kyocera MFP printers/error.device)=10023'
              name: Обработка
              status: DISABLED
              priority: INFO
            - uuid: 274c5458ec0f4cf5b6e4fc4e3c68658f
              expression: 'last(/Kyocera MFP printers/error.device)=44001'
              name: 'Открыта передняя крышка'
              priority: INFO
            - uuid: 52f441dc78e948ada057b59ad5606df9
              expression: 'last(/Kyocera MFP printers/error.device)=35078'
              name: 'Режим ожидания'
              status: DISABLED
              priority: INFO
        - uuid: 28366bd68f24426684339b94dc67fc5a
          name: 'Версия программного обеспеченгия'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.1347.43.5.4.1.5.1.1
          key: firmware.device
          delay: '86400'
          history: 90d
          value_type: CHAR
          inventory_link: SOFTWARE
          tags:
            - tag: Application
              value: 'Данные о принтере'
        - uuid: fc7111e956244d58899023fdba2b432d
          name: 'MAC адрес'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.2.1.2.2.1.6.1
          key: mac.device
          delay: '86400'
          history: 90d
          value_type: CHAR
          inventory_link: MACADDRESS_A
          tags:
            - tag: Application
              value: 'Данные о принтере'
        - uuid: fd99363b8f704579a5098fc82c44d7e1
          name: Модель
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.2.1.25.3.2.1.3.1
          key: model.device
          delay: '86400'
          history: 90d
          value_type: TEXT
          tags:
            - tag: Application
              value: 'Данные о принтере'
        - uuid: d689cc871596431293eb269c2eb402db
          name: 'IP адрес устройства'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.1347.40.10.1.1.4.1
          key: network.device
          delay: '86400'
          history: 90d
          value_type: CHAR
          inventory_link: OOB_IP
          tags:
            - tag: Application
              value: 'Данные о принтере'
        - uuid: e0e6da53988f4c2ebeb5f3c7ddb73890
          name: 'Сколько бумаги помещается в лоток'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.1347.42.23.1.16.0
          key: paper.device
          delay: '86400'
          history: 90d
          tags:
            - tag: Application
              value: Счетчики
        - uuid: 9b56ce307be540cd9fc1904def3ae99c
          name: 'Отпечатано страниц всего'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.1347.43.10.1.1.12.1.1
          key: printed.device
          delay: '1800'
          history: 90d
          tags:
            - tag: Application
              value: Счетчики
        - uuid: 8367b7b8355f4074872a5df6bf81c2e6
          name: 'Отпечатано страниц А4'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.1347.42.2.1.1.1.6.1.1
          key: printeda4.device
          delay: '1800'
          history: 90d
          tags:
            - tag: Application
              value: Счетчики
        - uuid: 7e132c67d00f4c15ae6ec4487407210e
          name: 'Отсканировано страниц'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.1347.42.3.1.4.1.1.1
          key: scan.device
          delay: '1800'
          history: 90d
          tags:
            - tag: Application
              value: Счетчики
        - uuid: d8953e587058461aaabe6a77095ede99
          name: 'Поддержка сканирования'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.1347.46.5.1.1.5.3
          key: scaner.device
          delay: '86400'
          history: 90d
          value_type: TEXT
          tags:
            - tag: Application
              value: 'Данные о принтере'
        - uuid: e5dbbf328ca7465a8ec3879798fd3d12
          name: 'Всего отсканировано и копировано страниц'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.1347.46.10.1.1.5.3
          key: scantotal.device
          delay: '3600'
          history: 90d
          tags:
            - tag: Application
              value: Счетчики
        - uuid: b68d61bdfc4b404da82ccbe7bc745324
          name: 'Серийный номер'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.1347.43.5.1.1.28.1
          key: sn.device
          delay: '86400'
          history: 90d
          value_type: CHAR
          inventory_link: SERIALNO_A
          tags:
            - tag: Application
              value: 'Данные о принтере'
        - uuid: 42d385ecf1f04c9b96bd91abdbf2c2e2
          name: 'Принтер: Код состояния'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.2.1.25.3.5.1.1.1
          key: status.device
          delay: '10'
          history: 90d
          tags:
            - tag: Application
              value: 'Данные о принтере'
          triggers:
            - uuid: 594a06c9063f4edaaabce3c48b0ce123
              expression: 'last(/Kyocera MFP printers/status.device)=3'
              name: 'Статус - Готов'
              status: DISABLED
              priority: INFO
            - uuid: c68a5585b210412a869b822cd6bc1ed6
              expression: 'last(/Kyocera MFP printers/status.device)=2'
              name: 'Статус - Неизвестная ошибка'
              priority: HIGH
            - uuid: e0fcbb8385ef45dc9ee5876121924113
              expression: 'last(/Kyocera MFP printers/status.device)=4'
              name: 'Статус - Печатает'
              status: DISABLED
              priority: INFO
            - uuid: e315bc4a1500458fb932efa9b0c6e685
              expression: 'last(/Kyocera MFP printers/status.device)=5'
              name: 'Статус - Прогрев'
              status: DISABLED
              priority: INFO
            - uuid: 633e096a56c84fda9ab4c77fcba60797
              expression: 'last(/Kyocera MFP printers/status.device)=1'
              name: 'Статус - Узел проявки не установлен или принтер требует внимания'
              status: DISABLED
              priority: HIGH
        - uuid: 3ea8c3527ba8445399cbe68ad182f73e
          name: 'Тонер: Остаток тонера'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.2.1.43.11.1.1.9.1.1
          key: toner.device
          delay: '180'
          history: 10d
          preprocessing:
            - type: IN_RANGE
              parameters:
                - '0'
                - ''
              error_handler: CUSTOM_VALUE
              error_handler_params: '0'
          tags:
            - tag: Application
              value: Счетчики
        - uuid: 8a5e2637401142fdbd7ed7a2964333a0
          name: 'Тонер: Остаток тонера %'
          type: CALCULATED
          key: toner.percentage
          delay: '180'
          history: 90d
          units: '%'
          params: '100*last(//toner.device)/last(//capacity.device)'
          tags:
            - tag: Application
              value: Счетчики
          triggers:
            - uuid: fa1e13f1687c4f9480c2338ca0568198
              expression: 'last(/Kyocera MFP printers/toner.percentage)<10'
              name: 'Уровень тонера меньше 10%'
              status: DISABLED
              priority: AVERAGE
        - uuid: 1d489115aa364143a0f44ee66781435a
          name: 'Модель картриджа'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.2.1.43.11.1.1.6.1.1
          key: tonerbox.device
          delay: '86400'
          history: 90d
          value_type: CHAR
          tags:
            - tag: Application
              value: 'Данные о принтере'
        - uuid: d9ea3bcccc904a16bc64bba0f6847c21
          name: 'Время Uptime'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.2.1.1.3.0
          key: uptime.device
          delay: '600'
          history: 90d
          units: uptime
          preprocessing:
            - type: MULTIPLIER
              parameters:
                - '0.01'
          tags:
            - tag: Application
              value: Счетчики
        - uuid: dee55e68a3d548f4a14e1511201ae7f1
          name: Расположение
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.2.1.1.6.0
          key: whereis.device
          delay: '86400'
          history: 90d
          value_type: TEXT
          inventory_link: LOCATION
          tags:
            - tag: Application
              value: 'Данные о принтере'
      discovery_rules:
        - uuid: 0bf7027190c14f0a8bead69e3a9cf469
          name: 'Kyocera Detect'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SNMPVALUE},1.3.6.1.4.1.1347.40.10.1.1.5.1]'
          key: find.device
          delay: '15'
          lifetime: 30d
          enabled_lifetime_type: DISABLE_NEVER
      dashboards:
        - uuid: d23426cc3e9c4d79a59f1c2160ea928c
          name: Printers
          display_period: '10'
          pages:
            - widgets:
                - type: tophosts
                  name: Printers
                  width: '43'
                  height: '5'
                  fields:
                    - type: INTEGER
                      name: column
                      value: '1'
                    - type: INTEGER
                      name: columns.0.data
                      value: '2'
                    - type: STRING
                      name: columns.0.name
                      value: Название
                    - type: INTEGER
                      name: columns.1.data
                      value: '1'
                    - type: INTEGER
                      name: columns.1.display_value_as
                      value: '1'
                    - type: STRING
                      name: columns.1.item
                      value: 'Принтер: Статус на дисплее'
                    - type: STRING
                      name: columns.1.name
                      value: Статус
                    - type: STRING
                      name: columns.2.base_color
                      value: 00FF00
                    - type: INTEGER
                      name: columns.2.data
                      value: '1'
                    - type: INTEGER
                      name: columns.2.decimal_places
                      value: '0'
                    - type: INTEGER
                      name: columns.2.display
                      value: '2'
                    - type: STRING
                      name: columns.2.item
                      value: 'Отпечатано страниц всего'
                    - type: STRING
                      name: columns.2.min
                      value: '0'
                    - type: STRING
                      name: columns.2.name
                      value: Отпечатано
                    - type: INTEGER
                      name: columns.3.data
                      value: '1'
                    - type: INTEGER
                      name: columns.3.decimal_places
                      value: '0'
                    - type: INTEGER
                      name: columns.3.display
                      value: '2'
                    - type: STRING
                      name: columns.3.item
                      value: 'Тонер: Остаток тонера %'
                    - type: STRING
                      name: columns.3.max
                      value: '100'
                    - type: STRING
                      name: columns.3.min
                      value: '0'
                    - type: STRING
                      name: columns.3.name
                      value: 'Тонер %'
                    - type: STRING
                      name: columnsthresholds.2.color.0
                      value: FFFF00
                    - type: STRING
                      name: columnsthresholds.2.color.1
                      value: FF8000
                    - type: STRING
                      name: columnsthresholds.2.color.2
                      value: FF0000
                    - type: STRING
                      name: columnsthresholds.2.threshold.0
                      value: '15000'
                    - type: STRING
                      name: columnsthresholds.2.threshold.1
                      value: '30000'
                    - type: STRING
                      name: columnsthresholds.2.threshold.2
                      value: '50000'
                    - type: STRING
                      name: columnsthresholds.3.color.0
                      value: FF0000
                    - type: STRING
                      name: columnsthresholds.3.color.1
                      value: FF8000
                    - type: STRING
                      name: columnsthresholds.3.color.2
                      value: FFFF00
                    - type: STRING
                      name: columnsthresholds.3.color.3
                      value: 00FF00
                    - type: STRING
                      name: columnsthresholds.3.threshold.0
                      value: '5'
                    - type: STRING
                      name: columnsthresholds.3.threshold.1
                      value: '10'
                    - type: STRING
                      name: columnsthresholds.3.threshold.2
                      value: '50'
                    - type: STRING
                      name: columnsthresholds.3.threshold.3
                      value: '80'
                    - type: STRING
                      name: reference
                      value: CYAKC
                    - type: INTEGER
                      name: rf_rate
                      value: '10'
  graphs:
    - uuid: 5b955ed1b15f4366a766ff8cfa76a923
      name: 'Остаток тонера'
      yaxismax: '0'
      graph_items:
        - color: 199C0D
          calc_fnc: ALL
          item:
            host: 'Kyocera MFP printers'
            key: toner.percentage
    - uuid: c3965811745d4815b176e6e34dad7c54
      name: 'Отпечатано страниц'
      graph_items:
        - color: FF8F00
          calc_fnc: MIN
          item:
            host: 'Kyocera MFP printers'
            key: printed.device
